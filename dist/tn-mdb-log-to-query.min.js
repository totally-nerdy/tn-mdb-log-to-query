function replaceOperations(e){var r,a;if(e.match(/(?<="\$regularExpression":)(.*?)(?<=})/gm))for(r of e.match(/(?<="\$regularExpression":)(.*?)(?<=})/gm))try{var t=JSON.parse(r);console.debug("$regularExpression",r,t),e=e.replace(`{"$regularExpression":${r}}`,`/${t.pattern}/`+t.options)}catch(e){console.error("Couldn't parse $regularExpression",r)}if(e.match(/(?<="\$date":)(.*?)(?=})/gm))for(a of e.match(/(?<="\$date":)(.*?)(?=})/gm))try{var o=JSON.parse(a);console.debug("$date",a,o),e=e.replace(`{"$date":${a}}`,`ISODate(${a})`)}catch(e){console.error("Couldn't parse $date",a)}return e}function parse(e){console.debug("Input:",e);let r="";try{var a=JSON.parse(e);if(console.debug("JSON:",a),a.attr&&a.attr.command){var t,o,n,s,i,g=a.attr.command;let e;g.aggregate?(t=g.pipeline,o=JSON.stringify(t),e=g.aggregate,o=replaceOperations(o),r=`db.${e}.aggregate(${o});`):g.find&&(n=g.filter,s=g.sort,i=JSON.stringify(n),e=g.find,i=replaceOperations(i),r=`db.${e}.find(${i})`,s&&(r+=`.sort(${JSON.stringify(s)})`),r+=";")}}catch(e){alert("The given input doesn't look like a JSON string. Are you on a MongoDB version < 4.4? Please paste only one log message at a time.")}return r}export{parse};